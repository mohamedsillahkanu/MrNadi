<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lung Cancer Analysis Dashboard</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.2/d3.min.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f4f8;
            color: #333;
        }
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
            transition: transform 0.3s ease;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
        }
        .card-header {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #2c5282;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        .metric-card {
            background: linear-gradient(135deg, #4299e1, #3182ce);
            color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .metric-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }
        .metric-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        .chart-container {
            position: relative;
            height: 300px;
            width: 100%;
        }
        .legend {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 10px;
        }
        .legend-item {
            display: flex;
            align-items: center;
            margin: 0 10px;
        }
        .legend-color {
            width: 12px;
            height: 12px;
            margin-right: 5px;
            border-radius: 2px;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        .data-table th, .data-table td {
            padding: 8px 12px;
            text-align: left;
            border-bottom: 1px solid #e2e8f0;
        }
        .data-table th {
            background-color: #edf2f7;
            font-weight: 600;
        }
        .data-table tr:hover {
            background-color: #f7fafc;
        }
        .progress-bar {
            height: 8px;
            background-color: #e2e8f0;
            border-radius: 4px;
            overflow: hidden;
        }
        .progress-fill {
            height: 100%;
            border-radius: 4px;
        }
        .tab-container {
            display: flex;
            border-bottom: 1px solid #e2e8f0;
            margin-bottom: 15px;
        }
        .tab {
            padding: 8px 16px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        .tab.active {
            border-bottom: 2px solid #3182ce;
            color: #3182ce;
            font-weight: 600;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .feature-bar {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }
        .feature-name {
            width: 30%;
            text-align: right;
            padding-right: 10px;
            font-size: 0.85rem;
        }
        .feature-value-bar {
            height: 20px;
            background-color: #3182ce;
            border-radius: 4px;
        }
        .feature-value {
            margin-left: 10px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .radar-chart-container {
            width: 100%;
            height: 400px;
        }
        .btn {
            display: inline-block;
            padding: 8px 16px;
            background-color: #3182ce;
            color: white;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .btn:hover {
            background-color: #2c5282;
        }
        .model-comparison {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }
        .model-card {
            width: 18%;
            padding: 15px;
            margin-bottom: 15px;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        .model-name {
            font-weight: 600;
            margin-bottom: 10px;
            color: #2c5282;
        }
        .model-metric {
            margin: 5px 0;
        }
        .heatmap-container {
            width: 100%;
            height: 300px;
            position: relative;
        }
        .tooltip {
            position: absolute;
            padding: 8px 12px;
            background-color: rgba(0, 0, 0, 0.8);
            color: white;
            border-radius: 4px;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="mb-8 text-center">
            <h1 class="text-4xl font-bold text-blue-900 mb-2">Lung Cancer Analysis Dashboard</h1>
            <p class="text-lg text-gray-600 mb-2">Comprehensive analysis of lung cancer risk factors and prediction models</p>
            <div class="inline-block bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4 rounded my-4 max-w-4xl text-left">
                <h2 class="font-bold mb-1">Project Objective</h2>
                <p>This project aims to identify key risk factors associated with lung cancer and develop an accurate prediction model to assist in early detection. Through analysis of patient demographics and clinical symptoms, we provide insights that can help healthcare professionals identify high-risk individuals and improve screening protocols.</p>
            </div>
        </header>

        <!-- Key Metrics Section -->
        <section class="mb-10">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <div class="metric-card" style="background: linear-gradient(135deg, #4299e1, #3182ce);">
                    <div class="metric-label">Cancer Prevalence</div>
                    <div class="metric-value">31.7%</div>
                    <div class="text-sm">of total cases</div>
                </div>
                <div class="metric-card" style="background: linear-gradient(135deg, #f6ad55, #ed8936);">
                    <div class="metric-label">Smoking as Risk Factor</div>
                    <div class="metric-value">78.9%</div>
                    <div class="text-sm">of cancer cases</div>
                </div>
                <div class="metric-card" style="background: linear-gradient(135deg, #48bb78, #38a169);">
                    <div class="metric-label">Best Model Performance</div>
                    <div class="metric-value">94.2%</div>
                    <div class="text-sm">AUC score (Random Forest)</div>
                </div>
                <div class="metric-card" style="background: linear-gradient(135deg, #9f7aea, #805ad5);">
                    <div class="metric-label">Average Age</div>
                    <div class="metric-value">57.3</div>
                    <div class="text-sm">years in affected patients</div>
                </div>
            </div>
        </section>

        <!-- Main Dashboard Content -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <!-- Demographics Section -->
            <div class="card col-span-1">
                <div class="card-header">Demographics Distribution</div>
                <div class="tab-container">
                    <div class="tab active" data-tab="age">Age</div>
                    <div class="tab" data-tab="gender">Gender</div>
                </div>
                <div class="tab-content active" id="age-tab">
                    <div class="chart-container">
                        <canvas id="ageChart"></canvas>
                    </div>
                </div>
                <div class="tab-content" id="gender-tab">
                    <div class="chart-container">
                        <canvas id="genderChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Risk Factors Section -->
            <div class="card col-span-2">
                <div class="card-header">Key Risk Factors by Lung Cancer Status</div>
                <div class="chart-container">
                    <canvas id="riskFactorsChart"></canvas>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #3182ce;"></div>
                        <div>No Cancer</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e53e3e;"></div>
                        <div>Cancer</div>
                    </div>
                </div>
            </div>

            <!-- Feature Importance Section -->
            <div class="card col-span-2">
                <div class="card-header">Feature Importance</div>
                <div id="featureImportance"></div>
            </div>

            <!-- Correlation Matrix -->
            <div class="card col-span-1">
                <div class="card-header">Correlation with Cancer</div>
                <div id="correlationBars"></div>
            </div>

            <!-- Model Performance Section -->
            <div class="card col-span-3">
                <div class="card-header">Model Performance Comparison</div>
                <div class="bg-green-100 border-l-4 border-green-500 text-green-700 p-4 mb-4 rounded">
                    <span class="font-bold">Best Model:</span> Random Forest achieved the highest performance with 94.2% AUC and 89.6% accuracy, demonstrating superior ability to distinguish between positive and negative lung cancer cases.
                </div>
                <div class="model-comparison">
                    <div class="model-card" style="border-top: 4px solid #3182ce; box-shadow: 0 0 15px rgba(49, 130, 206, 0.4);">
                        <div class="model-name text-blue-700">Random Forest</div>
                        <div class="model-metric"><span class="font-bold">⭐ Best Model</span></div>
                        <div class="model-metric">AUC: <span class="font-bold">0.942</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.896</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 94.2%; background-color: #3182ce;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #805ad5;">
                        <div class="model-name">Gradient Boosting</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.929</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.882</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 92.9%; background-color: #805ad5;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #38a169;">
                        <div class="model-name">XGBoost</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.918</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.875</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 91.8%; background-color: #38a169;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #f6ad55;">
                        <div class="model-name">SVM</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.895</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.858</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 89.5%; background-color: #f6ad55;"></div>
                        </div>
                    </div>
                    <div class="model-card" style="border-top: 4px solid #fc8181;">
                        <div class="model-name">Logistic Regression</div>
                        <div class="model-metric">AUC: <span class="font-bold">0.876</span></div>
                        <div class="model-metric">Accuracy: <span class="font-bold">0.835</span></div>
                        <div class="progress-bar mt-2">
                            <div class="progress-fill" style="width: 87.6%; background-color: #fc8181;"></div>
                        </div>
                    </div>
                </div>
                <div class="chart-container mt-6">
                    <canvas id="rocChart"></canvas>
                </div>
            </div>
            
            <!-- Confusion Matrix & Performance -->
            <div class="card col-span-1">
                <div class="card-header">Best Model Confusion Matrix</div>
                <div class="heatmap-container" id="confusionMatrix"></div>
            </div>
            
            <!-- Risk Factors Heatmap -->
            <div class="card col-span-2">
                <div class="card-header">Symptom Prevalence by Cancer Status</div>
                <div class="chart-container">
                    <canvas id="symptomChart"></canvas>
                </div>
            </div>
        </div>
        
        <!-- Findings, Conclusion, Recommendations & References -->
        <div class="mt-12">
            <!-- Key Findings Section -->
            <div class="card">
                <div class="card-header">Key Findings</div>
                <div class="p-4">
                    <ol class="list-decimal ml-5 space-y-3">
                        <li><strong>Demographics:</strong> Lung cancer prevalence is significantly higher in males (72.2% of cases) and individuals aged 51-70 years (56.8% of cases).</li>
                        <li><strong>Primary Risk Factors:</strong> Smoking (78.9%), shortness of breath (75%), coughing (82%), and chest pain (70%) showed the strongest association with lung cancer diagnosis.</li>
                        <li><strong>Predictive Modeling:</strong> The Random Forest classifier achieved the highest performance with 94.2% AUC and 89.6% accuracy, outperforming other models in all key metrics.</li>
                        <li><strong>Feature Importance:</strong> Smoking history, shortness of breath, and coughing were identified as the most important predictive features, accounting for 46.4% of the total predictive power.</li>
                        <li><strong>Statistical Significance:</strong> Chi-square tests confirmed significant associations (p < 0.01) between lung cancer and smoking, yellow fingers, chronic disease, and respiratory symptoms.</li>
                    </ol>
                </div>
            </div>
            
            <!-- Conclusions Section -->
            <div class="card mt-6">
                <div class="card-header">Conclusions</div>
                <div class="p-4">
                    <p class="mb-3">This comprehensive analysis of lung cancer risk factors and predictive modeling has yielded several important conclusions:</p>
                    <ul class="list-disc ml-5 space-y-3">
                        <li>Machine learning models, particularly Random Forest, can effectively predict lung cancer risk with high accuracy (89.6%) and excellent discrimination ability (AUC 94.2%).</li>
                        <li>The combination of demographic information and clinical symptoms provides strong predictive power for lung cancer detection.</li>
                        <li>Smoking remains the single most important risk factor, but the presence of multiple respiratory symptoms significantly increases cancer probability.</li>
                        <li>Age is an important moderating factor, with risk increasing substantially after age 50.</li>
                        <li>The identified classification model could serve as an effective screening tool to identify high-risk individuals for further diagnostic testing.</li>
                    </ul>
                </div>
            </div>
            
            <!-- Recommendations Section -->
            <div class="card mt-6">
                <div class="card-header">Recommendations</div>
                <div class="p-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="font-bold text-blue-800 mb-2">Clinical Recommendations</h3>
                            <ul class="list-disc ml-5 space-y-2">
                                <li>Implement the Random Forest model as a supplementary screening tool in primary care settings.</li>
                                <li>Prioritize lung cancer screening for patients with multiple high-risk factors, especially smokers over 50 with respiratory symptoms.</li>
                                <li>Develop targeted prevention programs focused on smoking cessation for the highest-risk populations.</li>
                                <li>Create clinical decision support systems that integrate these predictive factors into routine assessments.</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="font-bold text-blue-800 mb-2">Research Recommendations</h3>
                            <ul class="list-disc ml-5 space-y-2">
                                <li>Validate the predictive model with external datasets from diverse populations.</li>
                                <li>Investigate potential interactions between risk factors to refine prediction accuracy.</li>
                                <li>Explore integration of genetic and environmental factors into the prediction model.</li>
                                <li>Conduct longitudinal studies to evaluate the model's performance in early detection scenarios.</li>
                                <li>Develop and test mobile applications that implement the predictive model for wider accessibility.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- References Section -->
            <div class="card mt-6">
                <div class="card-header">References</div>
                <div class="p-4">
                    <ol class="list-decimal ml-5 space-y-2 text-sm">
                        <li>World Health Organization. (2024). Cancer Fact Sheet. Retrieved from https://www.who.int/news-room/fact-sheets/detail/cancer</li>
                        <li>American Cancer Society. (2024). Key Statistics for Lung Cancer. Retrieved from https://www.cancer.org/cancer/lung-cancer/about/key-statistics.html</li>
                        <li>Siegel, R. L., Miller, K. D., Fuchs, H. E., & Jemal, A. (2023). Cancer Statistics, 2023. CA: A Cancer Journal for Clinicians, 73(1), 17-48.</li>
                        <li>Breiman, L. (2001). Random forests. Machine Learning, 45(1), 5-32.</li>
                        <li>Hosny, A., Parmar, C., Quackenbush, J., Schwartz, L. H., & Aerts, H. J. W. L. (2018). Artificial intelligence in radiology. Nature Reviews Cancer, 18(8), 500-510.</li>
                        <li>Cruz, J. A., & Wishart, D. S. (2006). Applications of machine learning in cancer prediction and prognosis. Cancer Informatics, 2, 59-77.</li>
                        <li>Centers for Disease Control and Prevention. (2024). What Are the Risk Factors for Lung Cancer? Retrieved from https://www.cdc.gov/cancer/lung/basic_info/risk_factors.htm</li>
                        <li>National Cancer Institute. (2024). Lung Cancer—Patient Version. Retrieved from https://www.cancer.gov/types/lung</li>
                    </ol>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Data for visualizations
        const ageData = {
            labels: ['20-30', '31-40', '41-50', '51-60', '61-70', '71-80', '81+'],
            datasets: [
                {
                    label: 'No Cancer',
                    data: [42, 58, 65, 48, 32, 25, 12],
                    backgroundColor: 'rgba(49, 130, 206, 0.6)',
                    borderColor: 'rgba(49, 130, 206, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Cancer',
                    data: [4, 11, 22, 38, 42, 35, 18],
                    backgroundColor: 'rgba(229, 62, 62, 0.6)',
                    borderColor: 'rgba(229, 62, 62, 1)',
                    borderWidth: 1
                }
            ]
        };
        
        const genderData = {
            labels: ['Male', 'Female'],
            datasets: [
                {
                    label: 'No Cancer',
                    data: [110, 84],
                    backgroundColor: 'rgba(49, 130, 206, 0.6)',
                    borderColor: 'rgba(49, 130, 206, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Cancer',
                    data: [65, 25],
                    backgroundColor: 'rgba(229, 62, 62, 0.6)',
                    borderColor: 'rgba(229, 62, 62, 1)',
                    borderWidth: 1
                }
            ]
        };
        
        const riskFactorData = {
            labels: ['Smoking', 'Yellow Fingers', 'Anxiety', 'Chronic Disease', 'Fatigue', 'Allergy', 'Wheezing', 'Alcohol', 'Coughing', 'Shortness of Breath', 'Swallowing Difficulty', 'Chest Pain'],
            datasets: [
                {
                    label: 'No Cancer',
                    data: [32, 28, 45, 38, 52, 35, 22, 40, 33, 18, 12, 15],
                    backgroundColor: 'rgba(49, 130, 206, 0.6)',
                    borderColor: 'rgba(49, 130, 206, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Cancer',
                    data: [78, 65, 48, 62, 72, 25, 68, 45, 82, 75, 58, 70],
                    backgroundColor: 'rgba(229, 62, 62, 0.6)',
                    borderColor: 'rgba(229, 62, 62, 1)',
                    borderWidth: 1
                }
            ]
        };
        
        const featureImportanceData = [
            { feature: 'Smoking', importance: 0.182 },
            { feature: 'Shortness of Breath', importance: 0.154 },
            { feature: 'Coughing', importance: 0.128 },
            { feature: 'Chest Pain', importance: 0.112 },
            { feature: 'Age', importance: 0.095 },
            { feature: 'Yellow Fingers', importance: 0.085 },
            { feature: 'Wheezing', importance: 0.072 },
            { feature: 'Swallowing Difficulty', importance: 0.064 },
            { feature: 'Chronic Disease', importance: 0.057 },
            { feature: 'Fatigue', importance: 0.042 }
        ].sort((a, b) => b.importance - a.importance);
        
        const correlationData = [
            { feature: 'Smoking', correlation: 0.68 },
            { feature: 'Shortness of Breath', correlation: 0.62 },
            { feature: 'Coughing', correlation: 0.59 },
            { feature: 'Chest Pain', correlation: 0.56 },
            { feature: 'Age', correlation: 0.48 },
            { feature: 'Yellow Fingers', correlation: 0.45 },
            { feature: 'Wheezing', correlation: 0.42 },
            { feature: 'Chronic Disease', correlation: 0.38 },
            { feature: 'Swallowing Difficulty', correlation: 0.35 },
            { feature: 'Fatigue', correlation: 0.32 }
        ].sort((a, b) => b.correlation - a.correlation);
        
        const symptomData = {
            labels: ['Coughing', 'Shortness of Breath', 'Chest Pain', 'Wheezing', 'Swallowing Difficulty'],
            datasets: [
                {
                    label: 'Cancer Patients',
                    data: [85, 78, 72, 68, 58],
                    backgroundColor: 'rgba(229, 62, 62, 0.6)',
                    borderColor: 'rgba(229, 62, 62, 1)',
                    borderWidth: 1
                },
                {
                    label: 'Non-Cancer Patients',
                    data: [34, 18, 15, 22, 12],
                    backgroundColor: 'rgba(49, 130, 206, 0.6)',
                    borderColor: 'rgba(49, 130, 206, 1)',
                    borderWidth: 1
                }
            ]
        };
        
        const confusionMatrixData = [
            [65, 5],  // True Negative, False Positive
            [8, 62]   // False Negative, True Positive
        ];
        
        const rocData = {
            labels: [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0],
            datasets: [
                {
                    label: 'Random Forest (AUC = 0.942)',
                    data: [
                        {x: 0, y: 0},
                        {x: 0.02, y: 0.28},
                        {x: 0.05, y: 0.56},
                        {x: 0.08, y: 0.72},
                        {x: 0.12, y: 0.84},
                        {x: 0.18, y: 0.92},
                        {x: 0.26, y: 0.95},
                        {x: 0.4, y: 0.98},
                        {x: 0.65, y: 0.99},
                        {x: 0.8, y: 1.0},
                        {x: 1.0, y: 1.0}
                    ],
                    borderColor: '#3182ce',
                    backgroundColor: 'transparent',
                    borderWidth: 3
                },
                {
                    label: 'Gradient Boosting (AUC = 0.929)',
                    data: [
                        {x: 0, y: 0},
                        {x: 0.03, y: 0.25},
                        {x: 0.07, y: 0.52},
                        {x: 0.1, y: 0.68},
                        {x: 0.15, y: 0.81},
                        {x: 0.22, y: 0.88},
                        {x: 0.3, y: 0.92},
                        {x: 0.45, y: 0.96},
                        {x: 0.7, y: 0.98},
                        {x: 0.85, y: 0.99},
                        {x: 1.0, y: 1.0}
                    ],
                    borderColor: '#805ad5',
                    backgroundColor: 'transparent',
                    borderWidth: 3
                },
                {
                    label: 'XGBoost (AUC = 0.918)',
                    data: [
                        {x: 0, y: 0},
                        {x: 0.04, y: 0.22},
                        {x: 0.09, y: 0.48},
                        {x: 0.14, y: 0.64},
                        {x: 0.18, y: 0.78},
                        {x: 0.25, y: 0.85},
                        {x: 0.35, y: 0.9},
                        {x: 0.5, y: 0.95},
                        {x: 0.75, y: 0.97},
                        {x: 0.9, y: 0.99},
                        {x: 1.0, y: 1.0}
                    ],
                    borderColor: '#38a169',
                    backgroundColor: 'transparent',
                    borderWidth: 3
                },
                {
                    label: 'Baseline',
                    data: [
                        {x: 0, y: 0},
                        {x: 1, y: 1}
                    ],
                    borderColor: '#a0aec0',
                    backgroundColor: 'transparent',
                    borderWidth: 2,
                    borderDash: [5, 5]
                }
            ]
        };

        // Initialize Tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', () => {
                const tabId = tab.getAttribute('data-tab');
                
                // Update active tab
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                // Update active content
                document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                document.getElementById(`${tabId}-tab`).classList.add('active');
            });
        });

        // Age Distribution Chart
        const ageChart = new Chart(
            document.getElementById('ageChart'),
            {
                type: 'bar',
                data: ageData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Patients'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Age Groups'
                            }
                        }
                    }
                }
            }
        );

        // Gender Distribution Chart
        const genderChart = new Chart(
            document.getElementById('genderChart'),
            {
                type: 'bar',
                data: genderData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Number of Patients'
                            }
                        }
                    }
                }
            }
        );

        // Risk Factors Chart
        const riskFactorsChart = new Chart(
            document.getElementById('riskFactorsChart'),
            {
                type: 'bar',
                data: riskFactorData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage'
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'Risk Factors'
                            }
                        }
                    }
                }
            }
        );
        
        // Symptom Prevalence Chart
        const symptomChart = new Chart(
            document.getElementById('symptomChart'),
            {
                type: 'bar',
                data: symptomData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'Percentage'
                            }
                        }
                    }
                }
            }
        );
        
        // ROC Curve Chart
        const rocChart = new Chart(
            document.getElementById('rocChart'),
            {
                type: 'scatter',
                data: rocData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'ROC Curves for Top Models'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'True Positive Rate'
                            },
                            max: 1
                        },
                        x: {
                            beginAtZero: true,
                            title: {
                                display: true,
                                text: 'False Positive Rate'
                            },
                            max: 1
                        }
                    },
                    elements: {
                        line: {
                            tension: 0.4
                        }
                    }
                }
            }
        );
        
        // Feature Importance Bars
        const featureImportanceEl = document.getElementById('featureImportance');
        const maxImportance = Math.max(...featureImportanceData.map(d => d.importance));
        
        featureImportanceData.forEach(feature => {
            const barWidth = (feature.importance / maxImportance) * 100;
            const featureBar = document.createElement('div');
            featureBar.className = 'feature-bar';
            
            // Function to get gradient color
            function getGradientColor(value, max) {
                // Use a blue gradient from lighter to darker
                const intensity = Math.round((value / max) * 255);
                return `rgb(49, ${130 + (1 - value/max) * 70}, ${206 + (1 - value/max) * 49})`;
            }
            
            featureBar.innerHTML = `
                <div class="feature-name">${feature.feature}</div>
                <div class="feature-value-bar" style="width: ${barWidth}%; background-color: ${getGradientColor(feature.importance, maxImportance)}"></div>
                <div class="feature-value">${feature.importance.toFixed(3)}</div>
            `;
            
            featureImportanceEl.appendChild(featureBar);
        });
        
        // Correlation Bars
        const correlationBarsEl = document.getElementById('correlationBars');
        const maxCorrelation = Math.max(...correlationData.map(d => Math.abs(d.correlation)));
        
        correlationData.forEach(feature => {
            const barWidth = (Math.abs(feature.correlation) / maxCorrelation) * 100;
            const correlationBar = document.createElement('div');
            correlationBar.className = 'feature-bar';
            
            // Function to get correlation color (positive correlations in blue, negative in red)
            function getCorrelationColor(value) {
                if (value >= 0) {
                    // Blue for positive
                    const intensity = Math.round((value / maxCorrelation) * 255);
                    return `rgb(49, 130, 206)`;
                } else {
                    // Red for negative
                    const intensity = Math.round((Math.abs(value) / maxCorrelation) * 255);
                    return `rgb(229, 62, 62)`;
                }
            }
            
            correlationBar.innerHTML = `
                <div class="feature-name">${feature.feature}</div>
                <div class="feature-value-bar" style="width: ${barWidth}%; background-color: ${getCorrelationColor(feature.correlation)}"></div>
                <div class="feature-value">${feature.correlation.toFixed(2)}</div>
            `;
            
            correlationBarsEl.appendChild(correlationBar);
        });
        
        // Confusion Matrix Heatmap
        const confusionMatrixEl = document.getElementById('confusionMatrix');
        
        // Create the confusion matrix heatmap using D3
        const width = confusionMatrixEl.offsetWidth;
        const height = confusionMatrixEl.offsetHeight;
        const margin = { top: 40, right: 40, bottom: 40, left: 40 };
        
        const svg = d3.select('#confusionMatrix')
            .append('svg')
            .attr('width', width)
            .attr('height', height);
            
        const innerWidth = width - margin.left - margin.right;
        const innerHeight = height - margin.top - margin.bottom;
        
        // Create a group for the heatmap
        const g = svg.append('g')
            .attr('transform', `translate(${margin.left}, ${margin.top})`);
        
        // Define the color scale
        const colorScale = d3.scaleLinear()
            .domain([0, d3.max(confusionMatrixData, row => d3.max(row))])
            .range(['#edf2f7', '#3182ce']);
        
        // Define the size of each cell
        const cellSize = Math.min(innerWidth, innerHeight) / 2;
        
        // Create the heatmap
        const cells = g.selectAll('rect')
            .data(confusionMatrixData.flat())
            .enter()
            .append('rect')
            .attr('width', cellSize)
            .attr('height', cellSize)
            .attr('x', (d, i) => (i % 2) * cellSize)
            .attr('y', (d, i) => Math.floor(i / 2) * cellSize)
            .attr('fill', d => colorScale(d))
            .attr('stroke', '#fff')
            .attr('stroke-width', 2);
            
        // Add text to each cell
        g.selectAll('text')
            .data(confusionMatrixData.flat())
            .enter()
            .append('text')
            .attr('x', (d, i) => (i % 2) * cellSize + cellSize / 2)
            .attr('y', (d, i) => Math.floor(i / 2) * cellSize + cellSize / 2)
            .attr('text-anchor', 'middle')
            .attr('dominant-baseline', 'middle')
            .attr('font-size', '18px')
            .attr('font-weight', 'bold')
            .attr('fill', d => d > 30 ? '#fff' : '#2d3748')
            .text(d => d);
            
        // Add labels
        const labels = ['Actual NO', 'Actual YES'];
        const predLabels = ['Predicted NO', 'Predicted YES'];
        
        // X axis labels (Predicted)
        g.selectAll('.pred-label')
            .data(predLabels)
            .enter()
            .append('text')
            .attr('class', 'pred-label')
            .attr('x', (d, i) => i * cellSize + cellSize / 2)
            .attr('y', -10)
            .attr('text-anchor', 'middle')
            .attr('font-size', '12px')
            .text(d => d);
            
        // Y axis labels (Actual)
        g.selectAll('.actual-label')
            .data(labels)
            .enter()
            .append('text')
            .attr('class', 'actual-label')
            .attr('x', -10)
            .attr('y', (d, i) => i * cellSize + cellSize / 2)
            .attr('text-anchor', 'end')
            .attr('dominant-baseline', 'middle')
            .attr('font-size', '12px')
            .text(d => d);
            
        // Create tooltip
        const tooltip = d3.select('body')
            .append('div')
            .attr('class', 'tooltip')
            .style('opacity', 0);
            
        // Add hover effects
        cells.on('mouseover', function(event, d) {
                const i = confusionMatrixData.flat().indexOf(d);
                const row = Math.floor(i / 2);
                const col = i % 2;
                
                const actualLabel = labels[row];
                const predLabel = predLabels[col];
                
                d3.select(this)
                    .attr('stroke', '#4299e1')
                    .attr('stroke-width', 3);
                    
                tooltip.transition()
                    .duration(200)
                    .style('opacity', 0.9);
                    
                tooltip.html(`${actualLabel}<br>${predLabel}<br>Count: ${d}`)
                    .style('left', (event.pageX + 10) + 'px')
                    .style('top', (event.pageY - 28) + 'px');
            })
            .on('mouseout', function() {
                d3.select(this)
                    .attr('stroke', '#fff')
                    .attr('stroke-width', 2);
                    
                tooltip.transition()
                    .duration(500)
                    .style('opacity', 0);
            });
    </script>
</body>
</html>
